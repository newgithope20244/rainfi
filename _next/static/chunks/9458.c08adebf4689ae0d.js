(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9458,2940],{14799:function(e,t,a){"use strict";var l,i=a(11720);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({width:18,height:17,viewBox:"0 0 34 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=i.createElement("path",{d:"M17.983 7.995h-1.96c-.18 0-.326.151-.326.335v11.524c0 .11.048.21.134.273l6.739 5.052a.32.32 0 0 0 .456-.071l1.166-1.633a.335.335 0 0 0-.069-.469l-5.813-4.315V8.33a.332.332 0 0 0-.326-.336Zm8.961 3.148 6.393 1.603a.33.33 0 0 0 .403-.322l.033-6.76c0-.28-.314-.44-.526-.264l-6.425 5.153a.335.335 0 0 0-.12.335.338.338 0 0 0 .085.163.325.325 0 0 0 .157.092Zm6.837 12.604-2.311-.816a.318.318 0 0 0-.246.014.332.332 0 0 0-.166.187c-.078.214-.16.423-.245.632a14.736 14.736 0 0 1-3.094 4.71 14.377 14.377 0 0 1-4.587 3.177 14.034 14.034 0 0 1-5.613 1.163c-1.949 0-3.836-.389-5.614-1.163a14.375 14.375 0 0 1-4.586-3.177 14.874 14.874 0 0 1-3.095-4.71A15.14 15.14 0 0 1 3.1 18c0-2 .38-3.943 1.134-5.768a14.736 14.736 0 0 1 3.094-4.71 14.377 14.377 0 0 1 4.586-3.177 13.916 13.916 0 0 1 5.61-1.164c1.949 0 3.836.39 5.614 1.164a14.376 14.376 0 0 1 4.586 3.177c.416.431.807.88 1.166 1.352l2.438-1.959C28.118 2.705 23.124-.005 17.515 0 7.747.004-.097 8.15 0 18.184.099 28.042 7.906 36 17.523 36c7.562 0 14.004-4.923 16.458-11.817a.345.345 0 0 0-.2-.436Z"})))}},94184:function(e,t){var a;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var l={}.hasOwnProperty;function classNames(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)){if(a.length){var n=classNames.apply(null,a);n&&e.push(n)}}else if("object"===i){if(a.toString===Object.prototype.toString)for(var s in a)l.call(a,s)&&a[s]&&e.push(s);else e.push(a.toString())}}}return e.join(" ")}e.exports?(classNames.default=classNames,e.exports=classNames):void 0!==(a=(function(){return classNames}).apply(t,[]))&&(e.exports=a)}()},59458:function(e,t,a){"use strict";a.r(t);var l=a(97997),i=a(94184),n=a.n(i),s=a(41664),r=a.n(s),c=a(11720),d=a(26630),o=a(25675),u=a.n(o),f=a(42940),m=a(30381),v=a.n(m),p=a(14799),h=a(23306),g=a(81680),x=a(12012),b=a(11163),w=a(87853);let ActivityView=e=>{let{onClose:t,isOpen:a}=e,{supportedCurrencies:i,collectionStats:s}=(0,c.useContext)(w.default),[o,m]=(0,c.useState)([]),[p,h]=(0,c.useState)(!1),getLoansHistory=async()=>{var e,t;h(!1);let a=null===(e=await (0,x.mB)())||void 0===e?void 0:e.loans.map(e=>e),l=await (0,g.uN)(null==a?void 0:null===(t=a.filter(e=>!e.isDefi))||void 0===t?void 0:t.map(e=>e.mint)),i=null==a?void 0:a.map(e=>(e.date=new Date(e.updatedAt).toISOString(),e.nft=l.find(t=>t.mint==e.mint),e.status=(0,d.fm)(e.status),e)).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());m(i),h(!0)};return((0,c.useEffect)(()=>{a&&getLoansHistory()},[a]),p)?(0,l.tZ)("div",{className:"flex flex-col gap-8",children:(0,l.tZ)("div",{children:(0,l.tZ)("div",{className:"flex flex-col gap-2",children:o.slice(0,30).map((e,t)=>{var a,c,o;e.kind;let m=null==i?void 0:i[e.currency],p={Ongoing:"Loaned for ".concat((0,d.wv)(e.amount/m.decimals)),Repaid:"Repaid with ".concat((0,d.wv)(e.interest/m.decimals)),Sold:"Sold with ".concat((0,d.wv)(e.interest/m.decimals)),Liquidated:"Defaulted"},h=e[({Ongoing:"createdAt",Repaid:"repaidAt",Liquidated:"liquidatedAt",Sold:"soldAt"})[e.status]],g=new Date(h).getTime(),x=null==s?void 0:s.find(t=>t.collectionId==e.collectionId),b=e.isDefi?null==i?void 0:i[x.currencyIn]:null==i?void 0:i.So11111111111111111111111111111111111111112;return(0,l.tZ)(r(),{passHref:!0,legacyBehavior:!1,href:"/pools/".concat(e.lender),children:(0,l.tZ)("div",{className:"cursor-pointer flex gap-2 justify-between items-center dark:hover:bg-white dark:hover:bg-opacity-[5%] hover:bg-black hover:bg-opacity-[3%] bg-opacity-0 rounded-lg p-2",children:(0,l.BX)("div",{className:"flex gap-3 items-center",children:[(0,l.tZ)("div",{className:"h-10 w-10 relative rounded-xl overflow-hidden border-[#FFFFFF40]",children:(0,l.tZ)(u(),{alt:"image",src:"https://api-v2.rain.fi/image/50/".concat(e.isDefi?b.image:null==e?void 0:null===(a=e.nft)||void 0===a?void 0:a.image),blurDataURL:"https://api-v2.rain.fi/image/10/".concat(e.isDefi?b.image:null==e?void 0:null===(c=e.nft)||void 0===c?void 0:c.image),placeholder:"blur",layout:"fill",objectFit:"cover",objectPosition:"center",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover"}})}),(0,l.BX)("div",{className:"flex flex-col leading-5",children:[(0,l.BX)("div",{className:"flex gap-2 items-center",children:[(0,l.tZ)("div",{className:"text-left rounded-md text-[14px]",children:e.isDefi?(0,d.wv)((null==e?void 0:e.collateralAmount)/Math.pow(10,null==e?void 0:e.collateralDecimals)):null==e?void 0:null===(o=e.nft)||void 0===o?void 0:o.name}),e.isDefi&&(0,l.tZ)("div",{className:"w-20",children:(0,l.tZ)(u(),{alt:"image",src:null==b?void 0:b.image,height:16,width:16,className:"rounded-full"})})]}),(0,l.BX)("div",{className:n()("flex items-center gap-1 !text-[12px]",{"text-green-400":["Repaid","Sold"].includes(e.status),"text-red-400":"Liquidated"==e.status,"text-blue-400":"Ongoing"==e.status}),children:[(0,l.tZ)("div",{children:p[e.status]}),"Liquidated"!==e.status&&(0,l.tZ)(u(),{alt:"image",src:m.image,height:12,width:12,className:"flex"})," ","  ",["Repaid","Sold"].includes(e.status)&&"interest"]}),(0,l.tZ)(f.default,{className:"flex items-center justify-left gap-2",content:h,children:(0,l.tZ)("div",{className:"text-[12px] text-[#98a1c0]",children:v()(g).fromNow()})})]})]})})},"".concat(e.pubkey,"-").concat(t))})})})}):(0,l.tZ)("div",{className:"flex flex-col gap-8",children:(0,l.tZ)("div",{className:"flex flex-col gap-4 px-3",children:Array(20).fill(0).map((e,t)=>(0,l.tZ)("div",{className:"flex gap-2 items-center justify-between",children:(0,l.BX)("div",{className:"flex gap-2 items-center",children:[(0,l.tZ)("div",{className:"rounded-full bg-[#E8ECFB] dark:bg-gray-700 w-12 h-12 animate-pulse"}),(0,l.BX)("div",{className:"flex flex-col gap-1.5",children:[(0,l.tZ)("div",{className:"rounded-full bg-[#E8ECFB] dark:bg-gray-700 w-44 h-3 animate-pulse"}),(0,l.tZ)("div",{className:"rounded-full bg-[#E8ECFB] dark:bg-gray-700 w-32 h-2 animate-pulse"})]})]},"skeleton-pool-".concat(t))},t))})})};t.default=()=>{let[e,t]=(0,c.useState)(!1),a=(0,b.useRouter)();return"/"==a.pathname?null:(0,l.BX)("div",{className:n()("hidden sm:block z-[12] fixed top-24 right-0 h-2/3 w-[350px] transition-transform ease-in-out duration-300",{"translate-x-0":e,"translate-x-full":!e}),children:[(0,l.tZ)("button",{name:"open recent history",className:"absolute top-32 -left-12 p-2.5 bg-[#4c82fb50] text-[#4c82fb] hover:text-[#4c82fb80] rounded-lg",onClick:()=>{t(!e)},children:(0,l.tZ)(p.Z,{width:18,className:"fill-[#4c82fb] dark:fill-[#4c82fb] stroke-2 "})}),(0,l.BX)("div",{className:" text-black dark:text-white bg-white dark:bg-[#0E111C] border-[#D1D9EE] dark:border-[#2F3342] border rounded-xl",children:[(0,l.BX)("div",{className:"flex mb-2 justify-between items-center mx-2",children:[(0,l.tZ)("div",{className:"font-medium text-gray-500 dark:text-gray-300 py-2 flex gap-2 items-center text-center text-lg",children:"Latest activity"}),(0,l.tZ)("button",{name:"close",className:"group p-2 bg-[#e8ecfb] dark:bg-[#293249] hover:dark:bg-[#adbcff3d] hover:bg-[rgba(173, 188, 255, 0.24)] transition-colors rounded-xl",onClick:()=>t(!1),children:(0,l.tZ)(h.Z,{className:"w-4 fill-black dark:fill-white"})})]}),(0,l.tZ)("div",{className:"overflow-y-auto w-full h-[400px]",children:e&&(0,l.tZ)(ActivityView,{isOpen:e,onClose:()=>t(!1)})})]})]})}},42940:function(e,t,a){"use strict";a.r(t);var l=a(97997),i=a(94184),n=a.n(i),s=a(11720),r=a(63538),c=a(39920);t.default=e=>{let{children:t,content:a,contentClassName:i,contentAfterClick:d,className:o,placement:u}=e,[f,m]=(0,s.useState)(!1),{getArrowProps:v,getTooltipProps:p,setTooltipRef:h,setTriggerRef:g}=(0,r.O)({visible:f,onVisibleChange:m,placement:u||"top"}),x=(0,c.useTransition)(f,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:{duration:100}}),[b,w]=(0,s.useState)(a),N=(0,s.useCallback)(()=>{d&&w(d)},[d]);return(0,s.useEffect)(()=>{w(a)},[f,a]),(0,l.BX)("div",{className:o||"table",children:[(0,l.tZ)("div",{ref:g,onClick:N,children:t}),x((e,t,a)=>t&&(0,l.BX)(c.animated.div,{ref:h,...p({className:n()("tooltip-container dark:!bg-gray-300 dark:text-black max-w-[400px]",i),style:e}),children:[b,(0,l.tZ)("div",{...v({className:"tooltip-arrow"})})]},a))]})}}}]);