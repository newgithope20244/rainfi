"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6571],{98794:function(e,t,r){r.r(t),r.d(t,{Account:function(){return Account},Authorized:function(){return Authorized},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return tr},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return ez},BPF_LOADER_PROGRAM_ID:function(){return e3},BpfLoader:function(){return BpfLoader},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:function(){return e5},ComputeBudgetInstruction:function(){return ComputeBudgetInstruction},ComputeBudgetProgram:function(){return ComputeBudgetProgram},Connection:function(){return Connection},Ed25519Program:function(){return Ed25519Program},Enum:function(){return Enum},EpochSchedule:function(){return EpochSchedule},FeeCalculatorLayout:function(){return eJ},Keypair:function(){return Keypair},LAMPORTS_PER_SOL:function(){return rR},Loader:function(){return Loader},Lockup:function(){return Lockup},MAX_SEED_LENGTH:function(){return eO},Message:function(){return Message},NONCE_ACCOUNT_LENGTH:function(){return e1},NonceAccount:function(){return NonceAccount},PACKET_DATA_SIZE:function(){return eD},PublicKey:function(){return PublicKey},SIGNATURE_LENGTH_IN_BYTES:function(){return eH},SOLANA_SCHEMA:function(){return eN},STAKE_CONFIG_ID:function(){return rd},STAKE_INSTRUCTION_LAYOUTS:function(){return rg},SYSTEM_INSTRUCTION_LAYOUTS:function(){return e0},SYSVAR_CLOCK_PUBKEY:function(){return eM},SYSVAR_EPOCH_SCHEDULE_PUBKEY:function(){return eq},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return eG},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return eF},SYSVAR_RENT_PUBKEY:function(){return e$},SYSVAR_REWARDS_PUBKEY:function(){return eV},SYSVAR_SLOT_HASHES_PUBKEY:function(){return eZ},SYSVAR_SLOT_HISTORY_PUBKEY:function(){return eX},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return eY},Secp256k1Program:function(){return Secp256k1Program},SendTransactionError:function(){return SendTransactionError},StakeAuthorizationLayout:function(){return rp},StakeInstruction:function(){return StakeInstruction},StakeProgram:function(){return StakeProgram},Struct:function(){return Struct},SystemInstruction:function(){return SystemInstruction},SystemProgram:function(){return SystemProgram},Transaction:function(){return Transaction},TransactionInstruction:function(){return TransactionInstruction},VALIDATOR_INFO_KEY:function(){return rb},VOTE_PROGRAM_ID:function(){return rS},ValidatorInfo:function(){return ValidatorInfo},VoteAccount:function(){return VoteAccount},VoteAuthorizationLayout:function(){return rA},VoteInit:function(){return VoteInit},VoteInstruction:function(){return VoteInstruction},VoteProgram:function(){return VoteProgram},clusterApiUrl:function(){return clusterApiUrl},sendAndConfirmRawTransaction:function(){return sendAndConfirmRawTransaction},sendAndConfirmTransaction:function(){return sendAndConfirmTransaction}});var i,s,n,o,a,c,u,l,h,d=r(50780),g=r.n(d),p=r(59012),y=r(13550),m=r.n(y),b=r(68274),k=r.n(b),S=r(25532),_=r(39386),w=r(19179),A=r(30847),I=r(31198),R=r.n(I),P=r(17221),E=r.n(P),v=r(91094),x=r.n(v);let toBuffer=e=>p.lW.isBuffer(e)?e:e instanceof Uint8Array?p.lW.from(e.buffer,e.byteOffset,e.byteLength):p.lW.from(e);var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},B={},C={};function assert$6(e,t){if(!e)throw Error(t||"Assertion failed")}assert$6.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)};var W={exports:{}};"function"==typeof Object.create?W.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:W.exports=function(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}};var N=W.exports;function htonl(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function zero2(e){return 1===e.length?"0"+e:e}function zero8(e){if(7===e.length)return"0"+e;if(6===e.length)return"00"+e;if(5===e.length)return"000"+e;if(4===e.length)return"0000"+e;if(3===e.length)return"00000"+e;if(2===e.length)return"000000"+e;if(1===e.length)return"0000000"+e;else return e}C.inherits=N,C.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e){if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var i=0,s=0;s<e.length;s++){var n,o,a=e.charCodeAt(s);a<128?r[i++]=a:(a<2048?r[i++]=a>>6|192:((n=e,o=s,(64512&n.charCodeAt(o))!=55296||o<0||o+1>=n.length?1:(64512&n.charCodeAt(o+1))!=56320)?r[i++]=a>>12|224:(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++s)),r[i++]=a>>18|240,r[i++]=a>>12&63|128),r[i++]=a>>6&63|128),r[i++]=63&a|128)}}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},C.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t},C.htonl=htonl,C.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var s=e[i];"little"===t&&(s=htonl(s)),r+=zero8(s.toString(16))}return r},C.zero2=zero2,C.zero8=zero8,C.join32=function(e,t,r,i){var s,n=r-t;assert$6(n%4==0);for(var o=Array(n/4),a=0,c=t;a<o.length;a++,c+=4)s="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=s>>>0;return o},C.split32=function(e,t){for(var r=Array(4*e.length),i=0,s=0;i<e.length;i++,s+=4){var n=e[i];"big"===t?(r[s]=n>>>24,r[s+1]=n>>>16&255,r[s+2]=n>>>8&255,r[s+3]=255&n):(r[s+3]=n>>>24,r[s+2]=n>>>16&255,r[s+1]=n>>>8&255,r[s]=255&n)}return r},C.rotr32=function(e,t){return e>>>t|e<<32-t},C.rotl32=function(e,t){return e<<t|e>>>32-t},C.sum32=function(e,t){return e+t>>>0},C.sum32_3=function(e,t,r){return e+t+r>>>0},C.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},C.sum32_5=function(e,t,r,i,s){return e+t+r+i+s>>>0},C.sum64=function(e,t,r,i){var s=e[t],n=i+e[t+1]>>>0;e[t]=(n<i?1:0)+r+s>>>0,e[t+1]=n},C.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},C.sum64_lo=function(e,t,r,i){return t+i>>>0},C.sum64_4_hi=function(e,t,r,i,s,n,o,a){var c,u=t;return e+r+s+o+(0+((u=u+i>>>0)<t?1:0)+((u=u+n>>>0)<n?1:0)+((u=u+a>>>0)<a?1:0))>>>0},C.sum64_4_lo=function(e,t,r,i,s,n,o,a){return t+i+n+a>>>0},C.sum64_5_hi=function(e,t,r,i,s,n,o,a,c,u){var l,h=t;return e+r+s+o+c+(0+((h=h+i>>>0)<t?1:0)+((h=h+n>>>0)<n?1:0)+((h=h+a>>>0)<a?1:0)+((h=h+u>>>0)<u?1:0))>>>0},C.sum64_5_lo=function(e,t,r,i,s,n,o,a,c,u){return t+i+n+a+u>>>0},C.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},C.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},C.shr64_hi=function(e,t,r){return e>>>r},C.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var O={};function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}O.BlockHash=BlockHash$4,BlockHash$4.prototype.update=function(e,t){if(e=C.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=C.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$6(null===this.pending),this._digest(e)},BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=255&e}else for(n=8,i[s++]=255&e,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0;n<this.padLength;n++)i[s++]=0;return i};var L={},K={},U=C.rotr32;function maj32$1(e,t,r){return e&t^e&r^t&r}K.ft_1=function(e,t,r,i){return 0===e?t&r^~t&i:1===e||3===e?t^r^i:2===e?maj32$1(t,r,i):void 0},K.ch32=function(e,t,r){return e&t^~e&r},K.maj32=maj32$1,K.p32=function(e,t,r){return e^t^r},K.s0_256=function(e){return U(e,2)^U(e,13)^U(e,22)},K.s1_256=function(e){return U(e,6)^U(e,11)^U(e,25)},K.g0_256=function(e){return U(e,7)^U(e,18)^e>>>3},K.g1_256=function(e){return U(e,17)^U(e,19)^e>>>10};var z=C.rotl32,D=C.sum32,H=C.sum32_5,j=K.ft_1,M=O.BlockHash,q=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;M.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}C.inherits(SHA1,M),SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=z(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(i=0;i<r.length;i++){var u=~~(i/20),l=H(z(s,5),j(u,n,o,a),c,r[i],q[u]);c=a,a=o,o=z(n,30),n=s,s=l}this.h[0]=D(this.h[0],s),this.h[1]=D(this.h[1],n),this.h[2]=D(this.h[2],o),this.h[3]=D(this.h[3],a),this.h[4]=D(this.h[4],c)},SHA1.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h,"big"):C.split32(this.h,"big")};var G=C.sum32,$=C.sum32_4,V=C.sum32_5,Z=K.ch32,X=K.maj32,Y=K.s0_256,J=K.s1_256,Q=K.g0_256,ee=K.g1_256,et=O.BlockHash,er=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;et.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=er,this.W=Array(64)}function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}C.inherits(SHA256$1,et),SHA256$1.blockSize=512,SHA256$1.outSize=256,SHA256$1.hmacStrength=192,SHA256$1.padLength=64,SHA256$1.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=$(ee(r[i-2]),r[i-7],Q(r[i-15]),r[i-16]);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],l=this.h[6],h=this.h[7];for(assert$6(this.k.length===r.length),i=0;i<r.length;i++){var d=V(h,J(c),Z(c,u,l),this.k[i],r[i]),g=G(Y(s),X(s,n,o));h=l,l=u,u=c,c=G(a,d),a=o,o=n,n=s,s=G(d,g)}this.h[0]=G(this.h[0],s),this.h[1]=G(this.h[1],n),this.h[2]=G(this.h[2],o),this.h[3]=G(this.h[3],a),this.h[4]=G(this.h[4],c),this.h[5]=G(this.h[5],u),this.h[6]=G(this.h[6],l),this.h[7]=G(this.h[7],h)},SHA256$1.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h,"big"):C.split32(this.h,"big")},C.inherits(SHA224,SHA256$1),SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h.slice(0,7),"big"):C.split32(this.h.slice(0,7),"big")};var ei=C.rotr64_hi,es=C.rotr64_lo,en=C.shr64_hi,eo=C.shr64_lo,ea=C.sum64,ec=C.sum64_hi,eu=C.sum64_lo,el=C.sum64_4_hi,eh=C.sum64_4_lo,ed=C.sum64_5_hi,eg=C.sum64_5_lo,ep=O.BlockHash,ef=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;ep.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ef,this.W=Array(160)}function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512$1.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}C.inherits(SHA512$1,ep),SHA512$1.blockSize=1024,SHA512$1.outSize=512,SHA512$1.hmacStrength=192,SHA512$1.padLength=128,SHA512$1.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=function(e,t){var r=ei(e,t,19)^ei(t,e,29)^en(e,t,6);return r<0&&(r+=4294967296),r}(r[i-4],r[i-3]),n=function(e,t){var r=es(e,t,19)^es(t,e,29)^eo(e,t,6);return r<0&&(r+=4294967296),r}(r[i-4],r[i-3]),o=r[i-14],a=r[i-13],c=function(e,t){var r=ei(e,t,1)^ei(e,t,8)^en(e,t,7);return r<0&&(r+=4294967296),r}(r[i-30],r[i-29]),u=function(e,t){var r=es(e,t,1)^es(e,t,8)^eo(e,t,7);return r<0&&(r+=4294967296),r}(r[i-30],r[i-29]),l=r[i-32],h=r[i-31];r[i]=el(s,n,o,a,c,u,l,h),r[i+1]=eh(s,n,o,a,c,u,l,h)}},SHA512$1.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],n=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],l=this.h[7],h=this.h[8],d=this.h[9],g=this.h[10],p=this.h[11],y=this.h[12],m=this.h[13],b=this.h[14],k=this.h[15];assert$6(this.k.length===r.length);for(var S=0;S<r.length;S+=2){var _=b,w=k,A=function(e,t){var r=ei(e,t,14)^ei(e,t,18)^ei(t,e,9);return r<0&&(r+=4294967296),r}(h,d),I=function(e,t){var r=es(e,t,14)^es(e,t,18)^es(t,e,9);return r<0&&(r+=4294967296),r}(h,d),R=function(e,t,r,i,s){var n=e&r^~e&s;return n<0&&(n+=4294967296),n}(h,0,g,0,y),P=function(e,t,r,i,s,n){var o=t&i^~t&n;return o<0&&(o+=4294967296),o}(0,d,0,p,0,m),E=this.k[S],v=this.k[S+1],x=r[S],T=r[S+1],B=ed(_,w,A,I,R,P,E,v,x,T),C=eg(_,w,A,I,R,P,E,v,x,T);_=function(e,t){var r=ei(e,t,28)^ei(t,e,2)^ei(t,e,7);return r<0&&(r+=4294967296),r}(i,s);var W=ec(_,w=function(e,t){var r=es(e,t,28)^es(t,e,2)^es(t,e,7);return r<0&&(r+=4294967296),r}(i,s),A=function(e,t,r,i,s){var n=e&r^e&s^r&s;return n<0&&(n+=4294967296),n}(i,0,n,0,a),I=function(e,t,r,i,s,n){var o=t&i^t&n^i&n;return o<0&&(o+=4294967296),o}(0,s,0,o,0,c)),N=eu(_,w,A,I);b=y,k=m,y=g,m=p,g=h,p=d,h=ec(u,l,B,C),d=eu(l,l,B,C),u=a,l=c,a=n,c=o,n=i,o=s,i=ec(B,C,W,N),s=eu(B,C,W,N)}ea(this.h,0,i,s),ea(this.h,2,n,o),ea(this.h,4,a,c),ea(this.h,6,u,l),ea(this.h,8,h,d),ea(this.h,10,g,p),ea(this.h,12,y,m),ea(this.h,14,b,k)},SHA512$1.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h,"big"):C.split32(this.h,"big")},C.inherits(SHA384,SHA512$1),SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h.slice(0,12),"big"):C.split32(this.h.slice(0,12),"big")},L.sha1=SHA1,L.sha224=SHA224,L.sha256=SHA256$1,L.sha384=SHA384,L.sha512=SHA512$1;var ey={},em=C.rotl32,eb=C.sum32,ek=C.sum32_3,eS=C.sum32_4,e_=O.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;e_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}C.inherits(RIPEMD160,e_),ey.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],n=this.h[3],o=this.h[4],a=r,c=i,u=s,l=n,h=o,d=0;d<80;d++){var g,p,y=eb(em(eS(r,f(d,i,s,n),e[ew[d]+t],(g=d)<=15?0:g<=31?1518500249:g<=47?1859775393:g<=63?2400959708:2840853838),eI[d]),o);r=o,o=n,n=em(s,10),s=i,i=y,y=eb(em(eS(a,f(79-d,c,u,l),e[eA[d]+t],(p=d)<=15?1352829926:p<=31?1548603684:p<=47?1836072691:p<=63?2053994217:0),eR[d]),h),a=h,h=l,l=em(u,10),u=c,c=y}y=ek(this.h[1],s,l),this.h[1]=ek(this.h[2],n,h),this.h[2]=ek(this.h[3],o,a),this.h[3]=ek(this.h[4],r,c),this.h[4]=ek(this.h[0],i,u),this.h[0]=y},RIPEMD160.prototype._digest=function(e){return"hex"===e?C.toHex32(this.h,"little"):C.split32(this.h,"little")};var ew=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],eA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],eI=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],eR=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function Hmac(e,t,r){if(!(this instanceof Hmac))return new Hmac(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(C.toArray(t,r))}Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$6(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(t=0,this.inner=new this.Hash().update(e);t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this},Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},B.utils=C,B.common=O,B.sha=L,B.ripemd=ey,B.hmac=Hmac,B.sha1=B.sha.sha1,B.sha256=B.sha.sha256,B.sha224=B.sha.sha224,B.sha384=B.sha.sha384,B.sha512=B.sha.sha512,B.ripemd160=B.ripemd.ripemd160;let eP=!1,eE=!1,ev={debug:1,default:2,info:2,warning:3,error:4,off:5},ex=2,eT=null,eB=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){return e.message}return null}();(i=l||(l={})).DEBUG="DEBUG",i.INFO="INFO",i.WARNING="WARNING",i.ERROR="ERROR",i.OFF="OFF",(s=h||(h={})).UNKNOWN_ERROR="UNKNOWN_ERROR",s.NOT_IMPLEMENTED="NOT_IMPLEMENTED",s.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",s.NETWORK_ERROR="NETWORK_ERROR",s.SERVER_ERROR="SERVER_ERROR",s.TIMEOUT="TIMEOUT",s.BUFFER_OVERRUN="BUFFER_OVERRUN",s.NUMERIC_FAULT="NUMERIC_FAULT",s.MISSING_NEW="MISSING_NEW",s.INVALID_ARGUMENT="INVALID_ARGUMENT",s.MISSING_ARGUMENT="MISSING_ARGUMENT",s.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",s.CALL_EXCEPTION="CALL_EXCEPTION",s.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",s.NONCE_EXPIRED="NONCE_EXPIRED",s.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",s.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",s.TRANSACTION_REPLACED="TRANSACTION_REPLACED";let eC="0123456789abcdef";let Logger=class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let r=e.toLowerCase();null==ev[r]&&this.throwArgumentError("invalid log level name","logLevel",e),ex>ev[r]||console.log.apply(console,t)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,t,r){if(eE)return this.makeError("censored error",t,{});t||(t=Logger.errors.UNKNOWN_ERROR),r||(r={});let i=[];Object.keys(r).forEach(e=>{let t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=eC[t[e]>>4]+eC[15&t[e]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(t){i.push(e+"="+JSON.stringify(r[e].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);let s=e,n="";switch(t){case h.NUMERIC_FAULT:{n="NUMERIC_FAULT";let t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":n+="-"+t;break;case"negative-power":case"negative-width":n+="-unsupported";break;case"unbound-bitwise-result":n+="-unbound-result"}break}case h.CALL_EXCEPTION:case h.INSUFFICIENT_FUNDS:case h.MISSING_NEW:case h.NONCE_EXPIRED:case h.REPLACEMENT_UNDERPRICED:case h.TRANSACTION_REPLACED:case h.UNPREDICTABLE_GAS_LIMIT:n=t}n&&(e+=" [ See: https://links.ethers.org/v5-errors-"+n+" ]"),i.length&&(e+=" ("+i.join(", ")+")");let o=Error(e);return o.reason=s,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){eB&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:eB})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return eT||(eT=new Logger("logger/5.6.0")),eT}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),eP){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}eE=!!e,eP=!!t}static setLogLevel(e){let t=ev[e.toLowerCase()];if(null==t){Logger.globalLogger().warn("invalid log level - "+e);return}ex=t}static from(e){return new Logger(e)}};Logger.errors=h,Logger.levels=l;let eW=new Logger("bytes/5.6.0");function addSlice(e){return e.slice||(e.slice=function(){let t=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function isInteger(e){return"number"==typeof e&&e==e&&e%1==0}function sha256(e){return"0x"+B.sha256().update(function(e,t){var r,i;if(t||(t={}),"number"==typeof e){eW.checkSafeUint53(e,"invalid arrayify value");let t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),addSlice(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),e.toHexString&&(e=e.toHexString()),"string"==typeof(r=e)&&r.match(/^0x[0-9A-Fa-f]*$/)&&(!i||r.length===2+2*i)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0x0"+r.substring(2):"right"===t.hexPad?r+="0":eW.throwArgumentError("hex data is odd-length","value",e));let i=[];for(let e=0;e<r.length;e+=2)i.push(parseInt(r.substring(e,e+2),16));return addSlice(new Uint8Array(i))}return!function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e||!isInteger(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(!isInteger(r)||r<0||r>=256)return!1}return!0}(e)?eW.throwArgumentError("invalid arrayify value","value",e):addSlice(new Uint8Array(e))}(e)).digest("hex")}new Logger("sha2/5.6.0");let Struct=class Struct{constructor(e){Object.assign(this,e)}encode(){return p.lW.from((0,S.serialize)(eN,this))}static decode(e){return(0,S.deserialize)(eN,this,e)}static decodeUnchecked(e){return(0,S.deserializeUnchecked)(eN,this,e)}};let Enum=class Enum extends Struct{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw Error("Enum can only take single value");Object.keys(e).map(e=>{this.enum=e})}};let eN=new Map,eO=32;let PublicKey=class PublicKey extends Struct{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){let t=k().decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new(m())(t)}else this._bn=new(m())(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}equals(e){return this._bn.eq(e._bn)}toBase58(){return k().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){let e=this._bn.toArrayLike(p.lW);if(32===e.length)return e;let t=p.lW.alloc(32);return e.copy(t,32-e.length),t}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let i=p.lW.concat([e.toBuffer(),p.lW.from(t),r.toBuffer()]),s=sha256(new Uint8Array(i)).slice(2);return new PublicKey(p.lW.from(s,"hex"))}static createProgramAddressSync(e,t){let r=p.lW.alloc(0);e.forEach(function(e){if(e.length>eO)throw TypeError("Max seed length exceeded");r=p.lW.concat([r,toBuffer(e)])}),r=p.lW.concat([r,t.toBuffer(),p.lW.from("ProgramDerivedAddress")]);let i=sha256(new Uint8Array(r)).slice(2),s=new(m())(i,16).toArray(void 0,32);if(is_on_curve(s))throw Error("Invalid seeds, address must fall off the curve");return new PublicKey(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,i=255;for(;0!=i;){try{let s=e.concat(p.lW.from([i]));r=this.createProgramAddressSync(s,t)}catch(e){if(e instanceof TypeError)throw e;i--;continue}return[r,i]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new PublicKey(e);return 1==is_on_curve(t.toBytes())}};PublicKey.default=new PublicKey("11111111111111111111111111111111"),eN.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});let eL=g().lowlevel;function is_on_curve(e){var t=[eL.gf(),eL.gf(),eL.gf(),eL.gf()],r=eL.gf(),i=eL.gf(),s=eL.gf(),n=eL.gf(),o=eL.gf(),a=eL.gf(),c=eL.gf();return(eL.set25519(t[2],eK),eL.unpack25519(t[1],e),eL.S(s,t[1]),eL.M(n,s,eL.D),eL.Z(s,s,t[2]),eL.A(n,t[2],n),eL.S(o,n),eL.S(a,o),eL.M(c,a,o),eL.M(r,c,s),eL.M(r,r,n),eL.pow2523(r,r),eL.M(r,r,s),eL.M(r,r,n),eL.M(r,r,n),eL.M(t[0],r,n),eL.S(i,t[0]),eL.M(i,i,n),neq25519(i,s)&&eL.M(t[0],t[0],eU),eL.S(i,t[0]),eL.M(i,i,n),neq25519(i,s))?0:1}let eK=eL.gf([1]),eU=eL.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function neq25519(e,t){var r=new Uint8Array(32),i=new Uint8Array(32);return eL.pack25519(r,e),eL.pack25519(i,t),eL.crypto_verify_32(r,0,i,0)}let Account=class Account{constructor(e){this._keypair=void 0,e?this._keypair=g().sign.keyPair.fromSecretKey(toBuffer(e)):this._keypair=g().sign.keyPair()}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return toBuffer(this._keypair.secretKey)}};let ez=new PublicKey("BPFLoader1111111111111111111111111111111111"),eD=1232,eH=64,publicKey=(e="publicKey")=>_.blob(32,e),rustString=(e="string")=>{let t=_.struct([_.u32("length"),_.u32("lengthPadding"),_.blob(_.offset(_.u32(),-8),"chars")],e),r=t.decode.bind(t),i=t.encode.bind(t);return t.decode=(e,t)=>{let i=r(e,t);return i.chars.toString()},t.encode=(e,t,r)=>{let s={chars:p.lW.from(e,"utf8")};return i(s,t,r)},t.alloc=e=>_.u32().span+_.u32().span+p.lW.from(e,"utf8").length,t};function decodeLength(e){let t=0,r=0;for(;;){let i=e.shift();if(t|=(127&i)<<7*r,r+=1,(128&i)==0)break}return t}function encodeLength(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}let Message=class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new PublicKey(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];encodeLength(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,i=Array.from(k().decode(e.data)),s=[];encodeLength(s,t.length);let n=[];return encodeLength(n,i.length),{programIdIndex:r,keyIndicesCount:p.lW.from(s),keyIndices:t,dataLength:p.lW.from(n),data:i}}),i=[];encodeLength(i,r.length);let s=p.lW.alloc(eD);p.lW.from(i).copy(s);let n=i.length;r.forEach(e=>{let t=_.struct([_.u8("programIdIndex"),_.blob(e.keyIndicesCount.length,"keyIndicesCount"),_.seq(_.u8("keyIndex"),e.keyIndices.length,"keyIndices"),_.blob(e.dataLength.length,"dataLength"),_.seq(_.u8("userdatum"),e.data.length,"data")]),r=t.encode(e,s,n);n+=r}),s=s.slice(0,n);let o=_.struct([_.blob(1,"numRequiredSignatures"),_.blob(1,"numReadonlySignedAccounts"),_.blob(1,"numReadonlyUnsignedAccounts"),_.blob(t.length,"keyCount"),_.seq(publicKey("key"),e,"keys"),publicKey("recentBlockhash")]),a={numRequiredSignatures:p.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:p.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:p.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:p.lW.from(t),keys:this.accountKeys.map(e=>toBuffer(e.toBytes())),recentBlockhash:k().decode(this.recentBlockhash)},c=p.lW.alloc(2048),u=o.encode(a,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let t=[...e],r=t.shift(),i=t.shift(),s=t.shift(),n=decodeLength(t),o=[];for(let e=0;e<n;e++){let e=t.slice(0,32);t=t.slice(32),o.push(k().encode(p.lW.from(e)))}let a=t.slice(0,32);t=t.slice(32);let c=decodeLength(t),u=[];for(let e=0;e<c;e++){let e=t.shift(),r=decodeLength(t),i=t.slice(0,r);t=t.slice(r);let s=decodeLength(t),n=t.slice(0,s),o=k().encode(p.lW.from(n));t=t.slice(s),u.push({programIdIndex:e,accounts:i,data:o})}let l={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:k().encode(p.lW.from(a)),accountKeys:o,instructions:u};return new Message(l)}};function assert(e,t){if(!e)throw Error(t||"Assertion failed")}let ej=p.lW.alloc(eH).fill(0);let TransactionInstruction=class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=p.lW.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}};let Transaction=class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,e&&Object.assign(this,e)}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new TransactionInstruction(e))}),this}compileMessage(){let e;if(this._message){if(JSON.stringify(this.toJSON())!==JSON.stringify(this._json))throw Error("Transaction message mutated after being populated from Message");return this._message}let{nonceInfo:t}=this;t&&this.instructions[0]!=t.nonceInstruction&&(this.recentBlockhash=t.nonce,this.instructions.unshift(t.nonceInstruction));let{recentBlockhash:r}=this;if(!r)throw Error("Transaction recentBlockhash required");if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)e=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)e=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<this.instructions.length;e++)if(void 0===this.instructions[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let i=[],s=[];this.instructions.forEach(e=>{e.keys.forEach(e=>{s.push({...e})});let t=e.programId.toString();i.includes(t)||i.push(t)}),i.forEach(e=>{s.push({pubkey:new PublicKey(e),isSigner:!1,isWritable:!1})}),s.sort(function(e,t){let r=e.pubkey.toBase58().localeCompare(t.pubkey.toBase58()),i=e.isSigner===t.isSigner?0:e.isSigner?-1:1,s=e.isWritable===t.isWritable?r:e.isWritable?-1:1;return i||s});let n=[];s.forEach(e=>{let t=e.pubkey.toString(),r=n.findIndex(e=>e.pubkey.toString()===t);r>-1?n[r].isWritable=n[r].isWritable||e.isWritable:n.push(e)});let o=n.findIndex(t=>t.pubkey.equals(e));if(o>-1){let[e]=n.splice(o,1);e.isSigner=!0,e.isWritable=!0,n.unshift(e)}else n.unshift({pubkey:e,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=n.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)n[t].isSigner||(n[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let a=0,c=0,u=0,l=[],h=[];n.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(l.push(e.toString()),a+=1,r||(c+=1)):(h.push(e.toString()),r||(u+=1))});let d=l.concat(h),g=this.instructions.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map(e=>d.indexOf(e.pubkey.toString())),data:k().encode(t)}});return g.forEach(e=>{assert(e.programIdIndex>=0),e.accounts.forEach(e=>assert(e>=0))}),new Message({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:r,instructions:g})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){let r=this.signatures.every((e,r)=>t[r].equals(e.publicKey));if(r)return e}return this.signatures=t.map(e=>({signature:null,publicKey:e})),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let i of e){let e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let i=this._compile();this._partialSign(i,...r),this._verifySignatures(i.serialize(),!0)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let i of e){let e=i.publicKey.toString();t.has(e)||(t.add(e),r.push(i))}let i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=g().sign.detached(r,e.secretKey);this._addSignature(e.publicKey,toBuffer(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){assert(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=p.lW.from(t)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(e,t){for(let{signature:r,publicKey:i}of this.signatures)if(null===r){if(t)return!1}else if(!g().sign.detached.verify(e,r,i.toBuffer()))return!1;return!0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r&&!this._verifySignatures(i,t))throw Error("Signature verification failed");return this._serialize(i)}_serialize(e){let{signatures:t}=this,r=[];encodeLength(r,t.length);let i=r.length+64*t.length+e.length,s=p.lW.alloc(i);return assert(t.length<256),p.lW.from(r).copy(s,0),t.forEach(({signature:e},t)=>{null!==e&&(assert(64===e.length,"signature has invalid length"),p.lW.from(e).copy(s,r.length+64*t))}),e.copy(s,r.length+64*t.length),assert(s.length<=eD,`Transaction too large: ${s.length} > ${eD}`),s}get keys(){return assert(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return assert(1===this.instructions.length),this.instructions[0].programId}get data(){return assert(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e],r=decodeLength(t),i=[];for(let e=0;e<r;e++){let e=t.slice(0,eH);t=t.slice(eH),i.push(k().encode(p.lW.from(e)))}return Transaction.populate(Message.from(t),i)}static populate(e,t=[]){let r=new Transaction;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,i)=>{let s={signature:t==k().encode(ej)?null:k().decode(t),publicKey:e.accountKeys[i]};r.signatures.push(s)}),e.instructions.forEach(t=>{let i=t.accounts.map(t=>{let i=e.accountKeys[t];return{pubkey:i,isSigner:r.signatures.some(e=>e.publicKey.toString()===i.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new TransactionInstruction({keys:i,programId:e.accountKeys[t.programIdIndex],data:k().decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}};let eM=new PublicKey("SysvarC1ock11111111111111111111111111111111"),eq=new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),eG=new PublicKey("Sysvar1nstructions1111111111111111111111111"),eF=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),e$=new PublicKey("SysvarRent111111111111111111111111111111111"),eV=new PublicKey("SysvarRewards111111111111111111111111111111"),eZ=new PublicKey("SysvarS1otHashes111111111111111111111111111"),eX=new PublicKey("SysvarS1otHistory11111111111111111111111111"),eY=new PublicKey("SysvarStakeHistory1111111111111111111111111");async function sendAndConfirmTransaction(e,t,r,i){let s=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries},n=await e.sendTransaction(t,r,s),o=(await e.confirmTransaction(n,i&&i.commitment)).value;if(o.err)throw Error(`Transaction ${n} failed (${JSON.stringify(o)})`);return n}function sleep(e){return new Promise(t=>setTimeout(t,e))}function encodeData(e,t){let r;let i=e.layout.span>=0?e.layout.span:(r=0,e.layout.fields.forEach(e=>{e.span>=0?r+=e.span:"function"==typeof e.alloc&&(r+=e.alloc(t[e.property]))}),r),s=p.lW.alloc(i),n=Object.assign({instruction:e.index},t);return e.layout.encode(n,s),s}function decodeData(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}let eJ=_.nu64("lamportsPerSignature"),eQ=_.struct([_.u32("version"),_.u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),_.struct([eJ],"feeCalculator")]),e1=eQ.span;let NonceAccount=class NonceAccount{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=eQ.decode(toBuffer(e),0);return new NonceAccount({authorizedPubkey:new PublicKey(t.authorizedPubkey),nonce:new PublicKey(t.nonce).toString(),feeCalculator:t.feeCalculator})}};let SystemInstruction=class SystemInstruction{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=_.u32("instruction"),i=r.decode(e.data);for(let[e,r]of Object.entries(e0))if(r.index==i){t=e;break}if(!t)throw Error("Instruction type incorrect; not a SystemInstruction");return t}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:r,programId:i}=decodeData(e0.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new PublicKey(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=decodeData(e0.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:r,programId:i}=decodeData(e0.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new PublicKey(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=decodeData(e0.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,space:i,programId:s}=decodeData(e0.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey(t),seed:r,space:i,programId:new PublicKey(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=decodeData(e0.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new PublicKey(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,programId:i}=decodeData(e0.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey(t),seed:r,programId:new PublicKey(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:r,lamports:i,space:s,programId:n}=decodeData(e0.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new PublicKey(t),seed:r,lamports:i,space:s,programId:new PublicKey(n)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=decodeData(e0.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new PublicKey(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData(e0.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=decodeData(e0.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=decodeData(e0.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new PublicKey(t)}}static checkProgramId(e){if(!e.equals(SystemProgram.programId))throw Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}};let e0=Object.freeze({Create:{index:0,layout:_.struct([_.u32("instruction"),_.ns64("lamports"),_.ns64("space"),publicKey("programId")])},Assign:{index:1,layout:_.struct([_.u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},CreateWithSeed:{index:3,layout:_.struct([_.u32("instruction"),publicKey("base"),rustString("seed"),_.ns64("lamports"),_.ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:_.struct([_.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:_.struct([_.u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:_.struct([_.u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:_.struct([_.u32("instruction"),_.ns64("space")])},AllocateWithSeed:{index:9,layout:_.struct([_.u32("instruction"),publicKey("base"),rustString("seed"),_.ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:_.struct([_.u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:_.struct([_.u32("instruction"),_.ns64("lamports"),rustString("seed"),publicKey("programId")])}});let SystemProgram=class SystemProgram{constructor(){}static createAccount(e){let t=e0.Create,r=encodeData(t,{lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){let i=e0.TransferWithSeed;t=encodeData(i,{lamports:e.lamports,seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=e0.Transfer;t=encodeData(i,{lamports:e.lamports}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){let i=e0.AssignWithSeed;t=encodeData(i,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=e0.Assign;t=encodeData(i,{programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=e0.CreateWithSeed,r=encodeData(t,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){let t=new Transaction;"basePubkey"in e&&"seed"in e?t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:e1,programId:this.programId})):t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:e1,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=e0.InitializeNonceAccount,r=encodeData(t,{authorized:toBuffer(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eF,isSigner:!1,isWritable:!1},{pubkey:e$,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new TransactionInstruction(i)}static nonceAdvance(e){let t=e0.AdvanceNonceAccount,r=encodeData(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eF,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new TransactionInstruction(i)}static nonceWithdraw(e){let t=e0.WithdrawNonceAccount,r=encodeData(t,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:eF,isSigner:!1,isWritable:!1},{pubkey:e$,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){let t=e0.AuthorizeNonceAccount,r=encodeData(t,{authorized:toBuffer(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){let i=e0.AllocateWithSeed;t=encodeData(i,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=e0.Allocate;t=encodeData(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}};SystemProgram.programId=new PublicKey("11111111111111111111111111111111");let e2=eD-300;let Loader=class Loader{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Loader.chunkSize)+1+1)}static async load(e,t,r,i,s){{let n=await e.getMinimumBalanceForRentExemption(s.length),o=await e.getAccountInfo(r.publicKey,"confirmed"),a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new Transaction).add(SystemProgram.allocate({accountPubkey:r.publicKey,space:s.length})),o.owner.equals(i)||(a=a||new Transaction).add(SystemProgram.assign({accountPubkey:r.publicKey,programId:i})),o.lamports<n&&(a=a||new Transaction).add(SystemProgram.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports}))}else a=new Transaction().add(SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await sendAndConfirmTransaction(e,a,[t,r],{commitment:"confirmed"})}let n=_.struct([_.u32("instruction"),_.u32("offset"),_.u32("bytesLength"),_.u32("bytesLengthPadding"),_.seq(_.u8("byte"),_.offset(_.u32(),-8),"bytes")]),o=Loader.chunkSize,a=0,c=s,u=[];for(;c.length>0;){let s=c.slice(0,o),l=p.lW.alloc(o+16);n.encode({instruction:0,offset:a,bytes:s,bytesLength:0,bytesLengthPadding:0},l);let h=new Transaction().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:l});u.push(sendAndConfirmTransaction(e,h,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await sleep(250),a+=o,c=c.slice(o)}await Promise.all(u);{let s=_.struct([_.u32("instruction")]),n=p.lW.alloc(s.span);s.encode({instruction:1},n);let o=new Transaction().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:e$,isSigner:!1,isWritable:!1}],programId:i,data:n});await sendAndConfirmTransaction(e,o,[t,r],{commitment:"confirmed"})}return!0}};Loader.chunkSize=e2;let e3=new PublicKey("BPFLoader2111111111111111111111111111111111");let BpfLoader=class BpfLoader{static getMinNumSignatures(e){return Loader.getMinNumSignatures(e)}static load(e,t,r,i,s){return Loader.load(e,t,r,s,i)}};let ComputeBudgetInstruction=class ComputeBudgetInstruction{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=_.u8("instruction"),i=r.decode(e.data);for(let[e,r]of Object.entries(e5))if(r.index==i){t=e;break}if(!t)throw Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:r}=decodeData(e5.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=decodeData(e5.RequestHeapFrame,e.data);return{bytes:t}}static checkProgramId(e){if(!e.equals(ComputeBudgetProgram.programId))throw Error("invalid instruction; programId is not ComputeBudgetProgram")}};let e5=Object.freeze({RequestUnits:{index:0,layout:_.struct([_.u8("instruction"),_.u32("units"),_.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:_.struct([_.u8("instruction"),_.u32("bytes")])}});let ComputeBudgetProgram=class ComputeBudgetProgram{constructor(){}static requestUnits(e){let t=e5.RequestUnits,r=encodeData(t,e);return new TransactionInstruction({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){let t=e5.RequestHeapFrame,r=encodeData(t,e);return new TransactionInstruction({keys:[],programId:this.programId,data:r})}};ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");var e4={exports:{}};n=e4.exports,o="undefined"!=typeof self?self:T,c=a=function(){function F(){this.fetch=!1,this.DOMException=o.DOMException}return F.prototype=o,new F}(),function(e){var t={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function Headers(e){this.map={},e instanceof Headers?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function consumed(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function readBlobAsArrayBuffer(e){var t=new FileReader,r=fileReaderReady(t);return t.readAsArrayBuffer(e),r}function bufferClone(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var r;t.arrayBuffer&&t.blob&&(r=e)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=bufferClone(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=bufferClone(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var e,t,r,i=consumed(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=fileReaderReady(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},t.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){return e=normalizeName(e),this.has(e)?this.map[e]:null},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=normalizeValue(t)},Headers.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},Headers.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),iteratorFor(e)},Headers.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),iteratorFor(e)},Headers.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),iteratorFor(e)},t.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var s=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(e,t){var r,i,n=(t=t||{}).body;if(e instanceof Request){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new Headers(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),s.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function decode(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(s))}}),t}function Response(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var n=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===n.indexOf(t))throw RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})},e.DOMException=c.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function fetch(r,i){return new Promise(function(s,n){var o=new Request(r,i);if(o.signal&&o.signal.aborted)return n(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function abortXhr(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Headers,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var s=r.join(":").trim();t.append(i,s)}}),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;s(new Response(i,r))},a.onerror=function(){n(TypeError("Network request failed"))},a.ontimeout=function(){n(TypeError("Network request failed"))},a.onabort=function(){n(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",abortXhr),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",abortXhr)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}fetch.polyfill=!0,c.fetch||(c.fetch=fetch,c.Headers=Headers,c.Request=Request,c.Response=Response),e.Headers=Headers,e.Request=Request,e.Response=Response,e.fetch=fetch,Object.defineProperty(e,"__esModule",{value:!0})}({}),a.fetch.ponyfill=!0,delete a.fetch.polyfill,(n=a.fetch).default=a.fetch,n.fetch=a.fetch,n.Headers=a.Headers,n.Request=a.Request,n.Response=a.Response,e4.exports=n;var e6=(u=e4.exports)&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,e8=Object.prototype.toString,e9=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},fastStableStringify$1=function(e){var t=function stringify(e,t){var r,i,s,n,o,a,c;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"==typeof e.toJSON)return stringify(e.toJSON(),t);if("[object Array]"===(c=e8.call(e))){for(r=0,s="[",i=e.length-1;r<i;r++)s+=stringify(e[r],!0)+",";return i>-1&&(s+=stringify(e[r],!0)),s+"]"}if("[object Object]"!==c)return JSON.stringify(e);for(i=(n=e9(e).sort()).length,s="",r=0;r<i;)void 0!==(a=stringify(e[o=n[r]],!1))&&(s&&(s+=","),s+=JSON.stringify(o)+":"+a),r++;return"{"+s+"}";case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}(e,!1);if(void 0!==t)return""+t};function trailingZeros(e){let t=0;for(;e>1;)e/=2,t++;return t}let EpochSchedule=class EpochSchedule{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){var t;let r=trailingZeros(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-trailingZeros(32)-1,i=this.getSlotsInEpoch(r),s=e-(i-32);return[r,s]}{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+trailingZeros(32)):this.slotsPerEpoch}};let SendTransactionError=class SendTransactionError extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}};let e7=(0,w.oQ)((0,w.eE)(PublicKey),(0,w.Z_)(),e=>new PublicKey(e)),te=(0,w.bc)([(0,w.Z_)(),(0,w.i0)("base64")]),tt=(0,w.oQ)((0,w.eE)(p.lW),te,e=>p.lW.from(e[0],"base64")),tr=3e4;function createRpcResult(e){return(0,w.G0)([(0,w.dt)({jsonrpc:(0,w.i0)("2.0"),id:(0,w.Z_)(),result:e}),(0,w.dt)({jsonrpc:(0,w.i0)("2.0"),id:(0,w.Z_)(),error:(0,w.dt)({code:(0,w._4)(),message:(0,w.Z_)(),data:(0,w.jt)((0,w.Yj)())})})])}let ti=createRpcResult((0,w._4)());function jsonRpcResult(e){return(0,w.oQ)(createRpcResult(e),ti,t=>"error"in t?t:{...t,result:(0,w.Ue)(t.result,e)})}function jsonRpcResultAndContext(e){return jsonRpcResult((0,w.dt)({context:(0,w.dt)({slot:(0,w.Rx)()}),value:e}))}function notificationResultAndContext(e){return(0,w.dt)({context:(0,w.dt)({slot:(0,w.Rx)()}),value:e})}let ts=(0,w.dt)({foundation:(0,w.Rx)(),foundationTerm:(0,w.Rx)(),initial:(0,w.Rx)(),taper:(0,w.Rx)(),terminal:(0,w.Rx)()}),tn=jsonRpcResult((0,w.IX)((0,w.AG)((0,w.dt)({epoch:(0,w.Rx)(),effectiveSlot:(0,w.Rx)(),amount:(0,w.Rx)(),postBalance:(0,w.Rx)()})))),to=(0,w.dt)({epoch:(0,w.Rx)(),slotIndex:(0,w.Rx)(),slotsInEpoch:(0,w.Rx)(),absoluteSlot:(0,w.Rx)(),blockHeight:(0,w.jt)((0,w.Rx)()),transactionCount:(0,w.jt)((0,w.Rx)())}),ta=(0,w.dt)({slotsPerEpoch:(0,w.Rx)(),leaderScheduleSlotOffset:(0,w.Rx)(),warmup:(0,w.O7)(),firstNormalEpoch:(0,w.Rx)(),firstNormalSlot:(0,w.Rx)()}),tc=(0,w.IM)((0,w.Z_)(),(0,w.IX)((0,w.Rx)())),tu=(0,w.AG)((0,w.G0)([(0,w.dt)({}),(0,w.Z_)()])),tl=(0,w.dt)({err:tu}),th=(0,w.i0)("receivedSignature"),td=(0,w.dt)({"solana-core":(0,w.Z_)(),"feature-set":(0,w.jt)((0,w.Rx)())}),tg=jsonRpcResultAndContext((0,w.dt)({err:(0,w.AG)((0,w.G0)([(0,w.dt)({}),(0,w.Z_)()])),logs:(0,w.AG)((0,w.IX)((0,w.Z_)())),accounts:(0,w.jt)((0,w.AG)((0,w.IX)((0,w.AG)((0,w.dt)({executable:(0,w.O7)(),owner:(0,w.Z_)(),lamports:(0,w.Rx)(),data:(0,w.IX)((0,w.Z_)()),rentEpoch:(0,w.jt)((0,w.Rx)())}))))),unitsConsumed:(0,w.jt)((0,w.Rx)())})),tp=jsonRpcResultAndContext((0,w.dt)({byIdentity:(0,w.IM)((0,w.Z_)(),(0,w.IX)((0,w.Rx)())),range:(0,w.dt)({firstSlot:(0,w.Rx)(),lastSlot:(0,w.Rx)()})})),tf=jsonRpcResult(ts),ty=jsonRpcResult(to),tm=jsonRpcResult(ta),tb=jsonRpcResult(tc),tk=jsonRpcResult((0,w.Rx)()),tS=jsonRpcResultAndContext((0,w.dt)({total:(0,w.Rx)(),circulating:(0,w.Rx)(),nonCirculating:(0,w.Rx)(),nonCirculatingAccounts:(0,w.IX)(e7)})),t_=(0,w.dt)({amount:(0,w.Z_)(),uiAmount:(0,w.AG)((0,w.Rx)()),decimals:(0,w.Rx)(),uiAmountString:(0,w.jt)((0,w.Z_)())}),tw=jsonRpcResultAndContext((0,w.IX)((0,w.dt)({address:e7,amount:(0,w.Z_)(),uiAmount:(0,w.AG)((0,w.Rx)()),decimals:(0,w.Rx)(),uiAmountString:(0,w.jt)((0,w.Z_)())}))),tA=jsonRpcResultAndContext((0,w.IX)((0,w.dt)({pubkey:e7,account:(0,w.dt)({executable:(0,w.O7)(),owner:e7,lamports:(0,w.Rx)(),data:tt,rentEpoch:(0,w.Rx)()})}))),tI=(0,w.dt)({program:(0,w.Z_)(),parsed:(0,w._4)(),space:(0,w.Rx)()}),tR=jsonRpcResultAndContext((0,w.IX)((0,w.dt)({pubkey:e7,account:(0,w.dt)({executable:(0,w.O7)(),owner:e7,lamports:(0,w.Rx)(),data:tI,rentEpoch:(0,w.Rx)()})}))),tP=jsonRpcResultAndContext((0,w.IX)((0,w.dt)({lamports:(0,w.Rx)(),address:e7}))),tE=(0,w.dt)({executable:(0,w.O7)(),owner:e7,lamports:(0,w.Rx)(),data:tt,rentEpoch:(0,w.Rx)()}),tv=(0,w.dt)({pubkey:e7,account:tE}),tx=(0,w.oQ)((0,w.G0)([(0,w.eE)(p.lW),tI]),(0,w.G0)([te,tI]),e=>Array.isArray(e)?(0,w.Ue)(e,tt):e),tT=(0,w.dt)({executable:(0,w.O7)(),owner:e7,lamports:(0,w.Rx)(),data:tx,rentEpoch:(0,w.Rx)()}),tB=(0,w.dt)({pubkey:e7,account:tT}),tC=(0,w.dt)({state:(0,w.G0)([(0,w.i0)("active"),(0,w.i0)("inactive"),(0,w.i0)("activating"),(0,w.i0)("deactivating")]),active:(0,w.Rx)(),inactive:(0,w.Rx)()}),tW=jsonRpcResult((0,w.IX)((0,w.dt)({signature:(0,w.Z_)(),slot:(0,w.Rx)(),err:tu,memo:(0,w.AG)((0,w.Z_)()),blockTime:(0,w.jt)((0,w.AG)((0,w.Rx)()))}))),tN=jsonRpcResult((0,w.IX)((0,w.dt)({signature:(0,w.Z_)(),slot:(0,w.Rx)(),err:tu,memo:(0,w.AG)((0,w.Z_)()),blockTime:(0,w.jt)((0,w.AG)((0,w.Rx)()))}))),tO=(0,w.dt)({subscription:(0,w.Rx)(),result:notificationResultAndContext(tE)}),tL=(0,w.dt)({pubkey:e7,account:tE}),tK=(0,w.dt)({subscription:(0,w.Rx)(),result:notificationResultAndContext(tL)}),tU=(0,w.dt)({parent:(0,w.Rx)(),slot:(0,w.Rx)(),root:(0,w.Rx)()}),tz=(0,w.dt)({subscription:(0,w.Rx)(),result:tU}),tD=(0,w.G0)([(0,w.dt)({type:(0,w.G0)([(0,w.i0)("firstShredReceived"),(0,w.i0)("completed"),(0,w.i0)("optimisticConfirmation"),(0,w.i0)("root")]),slot:(0,w.Rx)(),timestamp:(0,w.Rx)()}),(0,w.dt)({type:(0,w.i0)("createdBank"),parent:(0,w.Rx)(),slot:(0,w.Rx)(),timestamp:(0,w.Rx)()}),(0,w.dt)({type:(0,w.i0)("frozen"),slot:(0,w.Rx)(),timestamp:(0,w.Rx)(),stats:(0,w.dt)({numTransactionEntries:(0,w.Rx)(),numSuccessfulTransactions:(0,w.Rx)(),numFailedTransactions:(0,w.Rx)(),maxTransactionsPerEntry:(0,w.Rx)()})}),(0,w.dt)({type:(0,w.i0)("dead"),slot:(0,w.Rx)(),timestamp:(0,w.Rx)(),err:(0,w.Z_)()})]),tH=(0,w.dt)({subscription:(0,w.Rx)(),result:tD}),tj=(0,w.dt)({subscription:(0,w.Rx)(),result:notificationResultAndContext((0,w.G0)([tl,th]))}),tM=(0,w.dt)({subscription:(0,w.Rx)(),result:(0,w.Rx)()}),tq=(0,w.dt)({pubkey:(0,w.Z_)(),gossip:(0,w.AG)((0,w.Z_)()),tpu:(0,w.AG)((0,w.Z_)()),rpc:(0,w.AG)((0,w.Z_)()),version:(0,w.AG)((0,w.Z_)())}),tG=(0,w.dt)({votePubkey:(0,w.Z_)(),nodePubkey:(0,w.Z_)(),activatedStake:(0,w.Rx)(),epochVoteAccount:(0,w.O7)(),epochCredits:(0,w.IX)((0,w.bc)([(0,w.Rx)(),(0,w.Rx)(),(0,w.Rx)()])),commission:(0,w.Rx)(),lastVote:(0,w.Rx)(),rootSlot:(0,w.AG)((0,w.Rx)())}),tF=jsonRpcResult((0,w.dt)({current:(0,w.IX)(tG),delinquent:(0,w.IX)(tG)})),t$=(0,w.G0)([(0,w.i0)("processed"),(0,w.i0)("confirmed"),(0,w.i0)("finalized")]),tV=(0,w.dt)({slot:(0,w.Rx)(),confirmations:(0,w.AG)((0,w.Rx)()),err:tu,confirmationStatus:(0,w.jt)(t$)}),tZ=jsonRpcResultAndContext((0,w.IX)((0,w.AG)(tV))),tX=jsonRpcResult((0,w.Rx)()),tY=(0,w.dt)({signatures:(0,w.IX)((0,w.Z_)()),message:(0,w.dt)({accountKeys:(0,w.IX)((0,w.Z_)()),header:(0,w.dt)({numRequiredSignatures:(0,w.Rx)(),numReadonlySignedAccounts:(0,w.Rx)(),numReadonlyUnsignedAccounts:(0,w.Rx)()}),instructions:(0,w.IX)((0,w.dt)({accounts:(0,w.IX)((0,w.Rx)()),data:(0,w.Z_)(),programIdIndex:(0,w.Rx)()})),recentBlockhash:(0,w.Z_)()})}),tJ=(0,w.dt)({parsed:(0,w._4)(),program:(0,w.Z_)(),programId:e7}),tQ=(0,w.dt)({accounts:(0,w.IX)(e7),data:(0,w.Z_)(),programId:e7}),t1=(0,w.G0)([tQ,tJ]),t0=(0,w.G0)([(0,w.dt)({parsed:(0,w._4)(),program:(0,w.Z_)(),programId:(0,w.Z_)()}),(0,w.dt)({accounts:(0,w.IX)((0,w.Z_)()),data:(0,w.Z_)(),programId:(0,w.Z_)()})]),t2=(0,w.oQ)(t1,t0,e=>"accounts"in e?(0,w.Ue)(e,tQ):(0,w.Ue)(e,tJ)),t3=(0,w.dt)({signatures:(0,w.IX)((0,w.Z_)()),message:(0,w.dt)({accountKeys:(0,w.IX)((0,w.dt)({pubkey:e7,signer:(0,w.O7)(),writable:(0,w.O7)()})),instructions:(0,w.IX)(t2),recentBlockhash:(0,w.Z_)()})}),t5=(0,w.dt)({accountIndex:(0,w.Rx)(),mint:(0,w.Z_)(),owner:(0,w.jt)((0,w.Z_)()),uiTokenAmount:t_}),t4=(0,w.dt)({err:tu,fee:(0,w.Rx)(),innerInstructions:(0,w.jt)((0,w.AG)((0,w.IX)((0,w.dt)({index:(0,w.Rx)(),instructions:(0,w.IX)((0,w.dt)({accounts:(0,w.IX)((0,w.Rx)()),data:(0,w.Z_)(),programIdIndex:(0,w.Rx)()}))})))),preBalances:(0,w.IX)((0,w.Rx)()),postBalances:(0,w.IX)((0,w.Rx)()),logMessages:(0,w.jt)((0,w.AG)((0,w.IX)((0,w.Z_)()))),preTokenBalances:(0,w.jt)((0,w.AG)((0,w.IX)(t5))),postTokenBalances:(0,w.jt)((0,w.AG)((0,w.IX)(t5)))}),t6=(0,w.dt)({err:tu,fee:(0,w.Rx)(),innerInstructions:(0,w.jt)((0,w.AG)((0,w.IX)((0,w.dt)({index:(0,w.Rx)(),instructions:(0,w.IX)(t2)})))),preBalances:(0,w.IX)((0,w.Rx)()),postBalances:(0,w.IX)((0,w.Rx)()),logMessages:(0,w.jt)((0,w.AG)((0,w.IX)((0,w.Z_)()))),preTokenBalances:(0,w.jt)((0,w.AG)((0,w.IX)(t5))),postTokenBalances:(0,w.jt)((0,w.AG)((0,w.IX)(t5)))}),t8=jsonRpcResult((0,w.AG)((0,w.dt)({blockhash:(0,w.Z_)(),previousBlockhash:(0,w.Z_)(),parentSlot:(0,w.Rx)(),transactions:(0,w.IX)((0,w.dt)({transaction:tY,meta:(0,w.AG)(t4)})),rewards:(0,w.jt)((0,w.IX)((0,w.dt)({pubkey:(0,w.Z_)(),lamports:(0,w.Rx)(),postBalance:(0,w.AG)((0,w.Rx)()),rewardType:(0,w.AG)((0,w.Z_)())}))),blockTime:(0,w.AG)((0,w.Rx)()),blockHeight:(0,w.AG)((0,w.Rx)())}))),t9=jsonRpcResult((0,w.AG)((0,w.dt)({blockhash:(0,w.Z_)(),previousBlockhash:(0,w.Z_)(),parentSlot:(0,w.Rx)(),transactions:(0,w.IX)((0,w.dt)({transaction:tY,meta:(0,w.AG)(t4)})),rewards:(0,w.jt)((0,w.IX)((0,w.dt)({pubkey:(0,w.Z_)(),lamports:(0,w.Rx)(),postBalance:(0,w.AG)((0,w.Rx)()),rewardType:(0,w.AG)((0,w.Z_)())}))),blockTime:(0,w.AG)((0,w.Rx)())}))),t7=jsonRpcResult((0,w.AG)((0,w.dt)({blockhash:(0,w.Z_)(),previousBlockhash:(0,w.Z_)(),parentSlot:(0,w.Rx)(),signatures:(0,w.IX)((0,w.Z_)()),blockTime:(0,w.AG)((0,w.Rx)())}))),re=jsonRpcResult((0,w.AG)((0,w.dt)({slot:(0,w.Rx)(),meta:t4,blockTime:(0,w.jt)((0,w.AG)((0,w.Rx)())),transaction:tY}))),rt=jsonRpcResult((0,w.AG)((0,w.dt)({slot:(0,w.Rx)(),transaction:t3,meta:(0,w.AG)(t6),blockTime:(0,w.jt)((0,w.AG)((0,w.Rx)()))}))),rr=jsonRpcResultAndContext((0,w.dt)({blockhash:(0,w.Z_)(),feeCalculator:(0,w.dt)({lamportsPerSignature:(0,w.Rx)()})})),ri=jsonRpcResultAndContext((0,w.dt)({blockhash:(0,w.Z_)(),lastValidBlockHeight:(0,w.Rx)()})),rs=(0,w.dt)({slot:(0,w.Rx)(),numTransactions:(0,w.Rx)(),numSlots:(0,w.Rx)(),samplePeriodSecs:(0,w.Rx)()}),rn=jsonRpcResult((0,w.IX)(rs)),ro=jsonRpcResultAndContext((0,w.AG)((0,w.dt)({feeCalculator:(0,w.dt)({lamportsPerSignature:(0,w.Rx)()})}))),ra=jsonRpcResult((0,w.Z_)()),rc=jsonRpcResult((0,w.Z_)()),ru=(0,w.dt)({err:tu,logs:(0,w.IX)((0,w.Z_)()),signature:(0,w.Z_)()}),rl=(0,w.dt)({result:notificationResultAndContext(ru),subscription:(0,w.Rx)()});let Connection=class Connection{constructor(e,t){var r,i;let s,n,o,a,c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={recentBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let u=new URL(e);u.protocol,t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,s=t.wsEndpoint,n=t.httpHeaders,o=t.fetch,a=t.fetchMiddleware,c=t.disableRetryOnRateLimit),this._rpcEndpoint=e,this._rpcWsEndpoint=s||function(e){let t=new URL(e),r="https:"===t.protocol;return t.protocol=r?"wss:":"ws:",t.host="",""!==t.port&&(t.port=String(Number(t.port)+1)),t.toString()}(e),this._rpcClient=function(e,t,r,i,s,n){let o;let a=i||e6;s&&(o=async(e,t)=>{let r=await new Promise((r,i)=>{try{s(e,t,(e,t)=>r([e,t]))}catch(e){i(e)}});return await a(...r)});let c=new(R())(async(t,i)=>{let s={method:"POST",body:t,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},r||{})};try{let t,r=5,c=500;for(;t=o?await o(e,s):await a(e,s),429===t.status&&!0!==n&&(r-=1,0!==r);)console.log(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await sleep(c),c*=2;let u=await t.text();t.ok?i(null,u):i(Error(`${t.status} ${t.statusText}: ${u}`))}catch(e){e instanceof Error&&i(e)}finally{}},{});return c}(u.toString(),0,n,o,a,c),this._rpcRequest=(r=this._rpcClient,(e,t)=>new Promise((i,s)=>{r.request(e,t,(e,t)=>{if(e){s(e);return}i(t)})})),this._rpcBatchRequest=(i=this._rpcClient,e=>new Promise((t,r)=>{0===e.length&&t([]);let s=e.map(e=>i.request(e.methodName,e.args));i.request(s,(e,i)=>{if(e){r(e);return}t(i)})})),this._rpcWebSocket=new A.K(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getBalance",r),s=(0,w.Ue)(i,jsonRpcResultAndContext((0,w.Rx)()));if("error"in s)throw Error("failed to get balance for "+e.toBase58()+": "+s.error.message);return s.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),r=(0,w.Ue)(t,jsonRpcResult((0,w.AG)((0,w.Rx)())));if("error"in r)throw Error("failed to get block time for slot "+e+": "+r.error.message);return r.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=(0,w.Ue)(e,jsonRpcResult((0,w.Rx)()));if("error"in t)throw Error("failed to get minimum ledger slot: "+t.error.message);return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=(0,w.Ue)(e,tk);if("error"in t)throw Error("failed to get first available block: "+t.error.message);return t.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let r=await this._rpcRequest("getSupply",[t]),i=(0,w.Ue)(r,tS);if("error"in i)throw Error("failed to get supply: "+i.error.message);return i.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=(0,w.Ue)(i,jsonRpcResultAndContext(t_));if("error"in s)throw Error("failed to get token supply: "+s.error.message);return s.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=(0,w.Ue)(i,jsonRpcResultAndContext(t_));if("error"in s)throw Error("failed to get token account balance: "+s.error.message);return s.result}async getTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let s=this._buildArgs(i,r,"base64"),n=await this._rpcRequest("getTokenAccountsByOwner",s),o=(0,w.Ue)(n,tA);if("error"in o)throw Error("failed to get token accounts owned by account "+e.toBase58()+": "+o.error.message);return o.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let s=this._buildArgs(i,r,"jsonParsed"),n=await this._rpcRequest("getTokenAccountsByOwner",s),o=(0,w.Ue)(n,tR);if("error"in o)throw Error("failed to get token accounts owned by account "+e.toBase58()+": "+o.error.message);return o.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=(0,w.Ue)(i,tP);if("error"in s)throw Error("failed to get largest accounts: "+s.error.message);return s.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=(0,w.Ue)(i,tw);if("error"in s)throw Error("failed to get token largest accounts: "+s.error.message);return s.result}async getAccountInfoAndContext(e,t){let r=this._buildArgs([e.toBase58()],t,"base64"),i=await this._rpcRequest("getAccountInfo",r),s=(0,w.Ue)(i,jsonRpcResultAndContext((0,w.AG)(tE)));if("error"in s)throw Error("failed to get info about account "+e.toBase58()+": "+s.error.message);return s.result}async getParsedAccountInfo(e,t){let r=this._buildArgs([e.toBase58()],t,"jsonParsed"),i=await this._rpcRequest("getAccountInfo",r),s=(0,w.Ue)(i,jsonRpcResultAndContext((0,w.AG)(tT)));if("error"in s)throw Error("failed to get info about account "+e.toBase58()+": "+s.error.message);return s.result}async getAccountInfo(e,t){try{let r=await this.getAccountInfoAndContext(e,t);return r.value}catch(t){throw Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleAccountsInfoAndContext(e,t){let r=e.map(e=>e.toBase58()),i=this._buildArgs([r],t,"base64"),s=await this._rpcRequest("getMultipleAccounts",i),n=(0,w.Ue)(s,jsonRpcResultAndContext((0,w.IX)((0,w.AG)(tE))));if("error"in n)throw Error("failed to get info for accounts "+r+": "+n.error.message);return n.result}async getMultipleAccountsInfo(e,t){let r=await this.getMultipleAccountsInfoAndContext(e,t);return r.value}async getStakeActivation(e,t,r){let i=this._buildArgs([e.toBase58()],t,void 0,void 0!==r?{epoch:r}:void 0),s=await this._rpcRequest("getStakeActivation",i),n=(0,w.Ue)(s,jsonRpcResult(tC));if("error"in n)throw Error(`failed to get Stake Activation ${e.toBase58()}: ${n.error.message}`);return n.result}async getProgramAccounts(e,t){let r,i;let s={};t&&("string"==typeof t?r=t:(r=t.commitment,i=t.encoding,t.dataSlice&&(s.dataSlice=t.dataSlice),t.filters&&(s.filters=t.filters)));let n=this._buildArgs([e.toBase58()],r,i||"base64",s),o=await this._rpcRequest("getProgramAccounts",n),a=(0,w.Ue)(o,jsonRpcResult((0,w.IX)(tv)));if("error"in a)throw Error("failed to get accounts owned by program "+e.toBase58()+": "+a.error.message);return a.result}async getParsedProgramAccounts(e,t){let r;let i={};t&&("string"==typeof t?r=t:(r=t.commitment,t.filters&&(i.filters=t.filters)));let s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),n=await this._rpcRequest("getProgramAccounts",s),o=(0,w.Ue)(n,jsonRpcResult((0,w.IX)(tB)));if("error"in o)throw Error("failed to get accounts owned by program "+e.toBase58()+": "+o.error.message);return o.result}async confirmTransaction(e,t){let r,i;try{r=k().decode(e)}catch(t){throw Error("signature must be base58 encoded: "+e)}assert(64===r.length,"signature has invalid length");let s=Date.now(),n=t||this.commitment,o=null,a=new Promise((t,r)=>{try{i=this.onSignature(e,(e,r)=>{i=void 0,o={context:r,value:e},t(null)},n)}catch(e){r(e)}}),c=this._confirmTransactionInitialTimeout||6e4;switch(n){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":c=this._confirmTransactionInitialTimeout||3e4}try{await function(e,t){let r;let i=new Promise(e=>{r=setTimeout(()=>e(null),t)});return Promise.race([e,i]).then(e=>(clearTimeout(r),e))}(a,c)}finally{i&&this.removeSignatureListener(i)}if(null===o){let t=(Date.now()-s)/1e3;throw Error(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`)}return o}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=(0,w.Ue)(e,jsonRpcResult((0,w.IX)(tq)));if("error"in t)throw Error("failed to get cluster nodes: "+t.error.message);return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=(0,w.Ue)(r,tF);if("error"in i)throw Error("failed to get vote accounts: "+i.error.message);return i.result}async getSlot(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getSlot",t),i=(0,w.Ue)(r,jsonRpcResult((0,w.Rx)()));if("error"in i)throw Error("failed to get slot: "+i.error.message);return i.result}async getSlotLeader(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getSlotLeader",t),i=(0,w.Ue)(r,jsonRpcResult((0,w.Z_)()));if("error"in i)throw Error("failed to get slot leader: "+i.error.message);return i.result}async getSlotLeaders(e,t){let r=await this._rpcRequest("getSlotLeaders",[e,t]),i=(0,w.Ue)(r,jsonRpcResult((0,w.IX)(e7)));if("error"in i)throw Error("failed to get slot leaders: "+i.error.message);return i.result}async getSignatureStatus(e,t){let{context:r,value:i}=await this.getSignatureStatuses([e],t);assert(1===i.length);let s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let i=await this._rpcRequest("getSignatureStatuses",r),s=(0,w.Ue)(i,tZ);if("error"in s)throw Error("failed to get signature status: "+s.error.message);return s.result}async getTransactionCount(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getTransactionCount",t),i=(0,w.Ue)(r,jsonRpcResult((0,w.Rx)()));if("error"in i)throw Error("failed to get transaction count: "+i.error.message);return i.result}async getTotalSupply(e){let t=await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0});return t.value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=(0,w.Ue)(r,tf);if("error"in i)throw Error("failed to get inflation: "+i.error.message);return i.result}async getInflationReward(e,t,r){let i=this._buildArgs([e.map(e=>e.toBase58())],r,void 0,{epoch:t}),s=await this._rpcRequest("getInflationReward",i),n=(0,w.Ue)(s,tn);if("error"in n)throw Error("failed to get inflation reward: "+n.error.message);return n.result}async getEpochInfo(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getEpochInfo",t),i=(0,w.Ue)(r,ty);if("error"in i)throw Error("failed to get epoch info: "+i.error.message);return i.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=(0,w.Ue)(e,tm);if("error"in t)throw Error("failed to get epoch schedule: "+t.error.message);let r=t.result;return new EpochSchedule(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=(0,w.Ue)(e,tb);if("error"in t)throw Error("failed to get leader schedule: "+t.error.message);return t.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=(0,w.Ue)(i,tX);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),i=(0,w.Ue)(r,rr);if("error"in i)throw Error("failed to get recent blockhash: "+i.error.message);return i.result}async getRecentPerformanceSamples(e){let t=this._buildArgs(e?[e]:[]),r=await this._rpcRequest("getRecentPerformanceSamples",t),i=(0,w.Ue)(r,rn);if("error"in i)throw Error("failed to get recent performance samples: "+i.error.message);return i.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=(0,w.Ue)(i,ro);if("error"in s)throw Error("failed to get fee calculator: "+s.error.message);let{context:n,value:o}=s.result;return{context:n,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){let r=e.serialize().toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),n=(0,w.Ue)(s,jsonRpcResultAndContext((0,w.AG)((0,w.Rx)())));if("error"in n)throw Error("failed to get slot: "+n.error.message);if(null===n.result)throw Error("invalid blockhash");return n.result}async getRecentBlockhash(e){try{let t=await this.getRecentBlockhashAndContext(e);return t.value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{let t=await this.getLatestBlockhashAndContext(e);return t.value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getLatestBlockhash",t),i=(0,w.Ue)(r,ri);if("error"in i)throw Error("failed to get latest blockhash: "+i.error.message);return i.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=(0,w.Ue)(e,jsonRpcResult(td));if("error"in t)throw Error("failed to get version: "+t.error.message);return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=(0,w.Ue)(e,jsonRpcResult((0,w.Z_)()));if("error"in t)throw Error("failed to get genesis hash: "+t.error.message);return t.result}async getBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t&&t.commitment),i=await this._rpcRequest("getBlock",r),s=(0,w.Ue)(i,t8);if("error"in s)throw Error("failed to get confirmed block: "+s.error.message);let n=s.result;return n?{...n,transactions:n.transactions.map(({transaction:e,meta:t})=>{let r=new Message(e.message);return{meta:t,transaction:{...e,message:r}}})}:n}async getBlockHeight(e){let t=this._buildArgs([],e),r=await this._rpcRequest("getBlockHeight",t),i=(0,w.Ue)(r,jsonRpcResult((0,w.Rx)()));if("error"in i)throw Error("failed to get block height information: "+i.error.message);return i.result}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){let{commitment:i,...s}=e;r=i,t=s}let i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),n=(0,w.Ue)(s,tp);if("error"in n)throw Error("failed to get block production information: "+n.error.message);return n.result}async getTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t&&t.commitment),i=await this._rpcRequest("getTransaction",r),s=(0,w.Ue)(i,re);if("error"in s)throw Error("failed to get transaction: "+s.error.message);let n=s.result;return n?{...n,transaction:{...n.transaction,message:new Message(n.transaction.message)}}:n}async getParsedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=(0,w.Ue)(i,rt);if("error"in s)throw Error("failed to get transaction: "+s.error.message);return s.result}async getParsedTransactions(e,t){let r=e.map(e=>{let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed");return{methodName:"getTransaction",args:r}}),i=await this._rpcBatchRequest(r),s=i.map(e=>{let t=(0,w.Ue)(e,rt);if("error"in t)throw Error("failed to get transactions: "+t.error.message);return t.result});return s}async getTransactions(e,t){let r=e.map(e=>{let r=this._buildArgsAtLeastConfirmed([e],t);return{methodName:"getTransaction",args:r}}),i=await this._rpcBatchRequest(r),s=i.map(e=>{let t=(0,w.Ue)(e,re);if("error"in t)throw Error("failed to get transactions: "+t.error.message);return t.result});return s}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",r),s=(0,w.Ue)(i,t9);if("error"in s)throw Error("failed to get confirmed block: "+s.error.message);let n=s.result;if(!n)throw Error("Confirmed block "+e+" not found");let o={...n,transactions:n.transactions.map(({transaction:e,meta:t})=>{let r=new Message(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:Transaction.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){let i=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),n=(0,w.Ue)(s,jsonRpcResult((0,w.IX)((0,w.Rx)())));if("error"in n)throw Error("failed to get blocks: "+n.error.message);return n.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=(0,w.Ue)(i,t7);if("error"in s)throw Error("failed to get block: "+s.error.message);let n=s.result;if(!n)throw Error("Block "+e+" not found");return n}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",r),s=(0,w.Ue)(i,t7);if("error"in s)throw Error("failed to get confirmed block: "+s.error.message);let n=s.result;if(!n)throw Error("Confirmed block "+e+" not found");return n}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",r),s=(0,w.Ue)(i,re);if("error"in s)throw Error("failed to get transaction: "+s.error.message);let n=s.result;if(!n)return n;let o=new Message(n.transaction.message),a=n.transaction.signatures;return{...n,transaction:Transaction.populate(o,a)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",r),s=(0,w.Ue)(i,rt);if("error"in s)throw Error("failed to get confirmed transaction: "+s.error.message);return s.result}async getParsedConfirmedTransactions(e,t){let r=e.map(e=>{let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),i=await this._rpcBatchRequest(r),s=i.map(e=>{let t=(0,w.Ue)(e,rt);if("error"in t)throw Error("failed to get confirmed transactions: "+t.error.message);return t.result});return s}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&!(--t<=0)&&!(t<s);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(i.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let n=await this.getSlot("finalized");for(;!("before"in i)&&!(++r>n);)try{let e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(i.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getConfirmedSignaturesForAddress2(e,i);return o.map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),n=(0,w.Ue)(s,tW);if("error"in n)throw Error("failed to get confirmed signatures for address: "+n.error.message);return n.result}async getSignaturesForAddress(e,t,r){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),n=(0,w.Ue)(s,tN);if("error"in n)throw Error("failed to get signatures for address: "+n.error.message);return n.result}async getNonceAndContext(e,t){let{context:r,value:i}=await this.getAccountInfoAndContext(e,t),s=null;return null!==i&&(s=NonceAccount.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){let r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=(0,w.Ue)(r,ra);if("error"in i)throw Error("airdrop to "+e.toBase58()+" failed: "+i.error.message);return i.result}async _recentBlockhash(e){if(!e){for(;this._pollingBlockhash;)await sleep(100);let e=Date.now()-this._blockhashInfo.lastFetch;if(null!==this._blockhashInfo.recentBlockhash&&!(e>=tr))return this._blockhashInfo.recentBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now();for(let e=0;e<50;e++){let{blockhash:e}=await this.getRecentBlockhash("finalized");if(this._blockhashInfo.recentBlockhash!=e)return this._blockhashInfo={recentBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await sleep(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async simulateTransaction(e,t,r){let i;if(e instanceof Transaction?(i=new Transaction({recentBlockhash:e.recentBlockhash,nonceInfo:e.nonceInfo,feePayer:e.feePayer,signatures:[...e.signatures]})).instructions=e.instructions:(i=Transaction.populate(e))._message=i._json=void 0,i.nonceInfo&&t)i.sign(...t);else{let e=this._disableBlockhashCaching;for(;i.recentBlockhash=await this._recentBlockhash(e),t;){if(i.sign(...t),!i.signature)throw Error("!signature");let r=i.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(r)||this._blockhashInfo.transactionSignatures.includes(r))e=!0;else{this._blockhashInfo.simulatedSignatures.push(r);break}}}let s=i._compile(),n=s.serialize(),o=i._serialize(n),a=o.toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){let e=(Array.isArray(r)?r:s.nonProgramIds()).map(e=>e.toBase58());c.accounts={encoding:"base64",addresses:e}}t&&(c.sigVerify=!0);let u=[a,c],l=await this._rpcRequest("simulateTransaction",u),h=(0,w.Ue)(l,tg);if("error"in h){let e;if("data"in h.error&&(e=h.error.data.logs)&&Array.isArray(e)){let t="\n    ",r=t+e.join(t);console.error(h.error.message,r)}throw new SendTransactionError("failed to simulate transaction: "+h.error.message,e)}return h.result}async sendTransaction(e,t,r){if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){if(e.recentBlockhash=await this._recentBlockhash(r),e.sign(...t),!e.signature)throw Error("!signature");let i=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(i))r=!0;else{this._blockhashInfo.transactionSignatures.push(i);break}}}let i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){let r=toBuffer(e).toString("base64"),i=await this.sendEncodedTransaction(r,t);return i}async sendEncodedTransaction(e,t){let r={encoding:"base64"},i=t&&t.skipPreflight,s=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries&&(r.maxRetries=t.maxRetries),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);let n=[e,r],o=await this._rpcRequest("sendTransaction",n),a=(0,w.Ue)(o,rc);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new SendTransactionError("failed to send transaction: "+a.error.message,e)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(e){console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketGeneration++,this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._subscriptionsByHash[e]={...t,state:"pending"}})}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,isCurrentConnectionStillActive=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{let t=this._subscriptionsByHash[e];if(void 0!==t)switch(t.state){case"pending":case"unsubscribed":if(0===t.callbacks.size){delete this._subscriptionsByHash[e],"unsubscribed"===t.state&&delete this._subscriptionCallbacksByServerSubscriptionId[t.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:r,method:i}=t;try{this._subscriptionsByHash[e]={...t,state:"subscribing"};let s=await this._rpcWebSocket.call(i,r);this._subscriptionsByHash[e]={...t,serverSubscriptionId:s,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[s]=t.callbacks,await this._updateSubscriptions()}catch(s){if(s instanceof Error&&console.error(`${i} error for argument`,r,s.message),!isCurrentConnectionStillActive())return;this._subscriptionsByHash[e]={...t,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":0===t.callbacks.size&&await (async()=>{let{serverSubscriptionId:r,unsubscribeMethod:i}=t;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._subscriptionsByHash[e]={...t,state:"unsubscribing"};try{await this._rpcWebSocket.call(i,[r])}catch(r){if(r instanceof Error&&console.error(`${i} error:`,r.message),!isCurrentConnectionStillActive())return;this._subscriptionsByHash[e]={...t,state:"subscribed"},await this._updateSubscriptions();return}}this._subscriptionsByHash[e]={...t,state:"unsubscribed"},await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tO);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,i=fastStableStringify$1([e.method,t],!0),s=this._subscriptionsByHash[i];return void 0===s?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];let t=this._subscriptionsByHash[i];assert(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let i=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tK);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){let s=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let i=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,rl);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tz);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tH);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){let s=t||this._commitment;if(s||r||i){let t={};r&&(t.encoding=r),s&&(t.commitment=s),i&&(t=Object.assign(t,i)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){let s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tj);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){let{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},n=this._buildArgs([e],i,void 0,s),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=(0,w.Ue)(e,tM);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}};let Keypair=class Keypair{constructor(e){this._keypair=void 0,e?this._keypair=e:this._keypair=g().sign.keyPair()}static generate(){return new Keypair(g().sign.keyPair())}static fromSecretKey(e,t){let r=g().sign.keyPair.fromSecretKey(e);if(!t||!t.skipValidation){let e=new TextEncoder,t=e.encode("@solana/web3.js-validation-v1"),i=g().sign.detached(t,r.secretKey);if(!g().sign.detached.verify(t,i,r.publicKey))throw Error("provided secretKey is invalid")}return new Keypair(r)}static fromSeed(e){return new Keypair(g().sign.keyPair.fromSeed(e))}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}};let rh=_.struct([_.u8("numSignatures"),_.u8("padding"),_.u16("signatureOffset"),_.u16("signatureInstructionIndex"),_.u16("publicKeyOffset"),_.u16("publicKeyInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u16("messageInstructionIndex")]);let Ed25519Program=class Ed25519Program{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:i,instructionIndex:s}=e;assert(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),assert(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);let n=rh.span,o=n+t.length,a=o+i.length,c=p.lW.alloc(a+r.length),u=null==s?65535:s;return rh.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:u,publicKeyOffset:n,publicKeyInstructionIndex:u,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:u},c),c.fill(t,n),c.fill(i,o),c.fill(r,a),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:c})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:i}=e;assert(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=Keypair.fromSecretKey(t),s=e.publicKey.toBytes(),n=g().sign.detached(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:n,instructionIndex:i})}catch(e){throw Error(`Error creating instruction; ${e}`)}}};Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");let rd=new PublicKey("StakeConfig11111111111111111111111111111111");let Authorized=class Authorized{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}};let Lockup=class Lockup{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}};Lockup.default=new Lockup(0,0,PublicKey.default);let StakeInstruction=class StakeInstruction{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=_.u32("instruction"),i=r.decode(e.data);for(let[e,r]of Object.entries(rg))if(r.index==i){t=e;break}if(!t)throw Error("Instruction type incorrect; not a StakeInstruction");return t}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t,lockup:r}=decodeData(rg.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Authorized(new PublicKey(t.staker),new PublicKey(t.withdrawer)),lockup:new Lockup(r.unixTimestamp,r.epoch,new PublicKey(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),decodeData(rg.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,stakeAuthorizationType:r}=decodeData(rg.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:s}=decodeData(rg.AuthorizeWithSeed,e.data),n={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new PublicKey(s),newAuthorizedPubkey:new PublicKey(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=decodeData(rg.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData(rg.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=decodeData(rg.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData(rg.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(StakeProgram.programId))throw Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}};let rg=Object.freeze({Initialize:{index:0,layout:_.struct([_.u32("instruction"),((e="authorized")=>_.struct([publicKey("staker"),publicKey("withdrawer")],e))(),((e="lockup")=>_.struct([_.ns64("unixTimestamp"),_.ns64("epoch"),publicKey("custodian")],e))()])},Authorize:{index:1,layout:_.struct([_.u32("instruction"),publicKey("newAuthorized"),_.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:_.struct([_.u32("instruction")])},Split:{index:3,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Withdraw:{index:4,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])},Deactivate:{index:5,layout:_.struct([_.u32("instruction")])},Merge:{index:7,layout:_.struct([_.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:_.struct([_.u32("instruction"),publicKey("newAuthorized"),_.u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}}),rp=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});let StakeProgram=class StakeProgram{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:i}=e,s=i||Lockup.default,n=rg.Initialize,o=encodeData(n,{authorized:{staker:toBuffer(r.staker.toBuffer()),withdrawer:toBuffer(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:toBuffer(s.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e$,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new TransactionInstruction(a)}static createAccountWithSeed(e){let t=new Transaction;t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static createAccount(e){let t=new Transaction;t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:i}=e,s=rg.Delegate,n=encodeData(s);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:rd,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:n}=e,o=rg.Authorize,a=encodeData(o,{newAuthorized:toBuffer(i.toBuffer()),stakeAuthorizationType:s.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eM,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return n&&c.push({pubkey:n,isSigner:!1,isWritable:!1}),new Transaction().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:a}=e,c=rg.AuthorizeWithSeed,u=encodeData(c,{newAuthorized:toBuffer(n.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:i,authorityOwner:toBuffer(s.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:eM,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!1,isWritable:!1}),new Transaction().add({keys:l,programId:this.programId,data:u})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,lamports:s}=e,n=rg.Split,o=encodeData(n,{lamports:s});return new TransactionInstruction({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e){let t=new Transaction;return t.add(SystemProgram.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,basePubkey:s,seed:n,lamports:o}=e,a=new Transaction;return a.add(SystemProgram.allocate({accountPubkey:i,basePubkey:s,seed:n,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,lamports:o}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:i}=e,s=rg.Merge,n=encodeData(s);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:i,lamports:s,custodianPubkey:n}=e,o=rg.Withdraw,a=encodeData(o,{lamports:s}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return n&&c.push({pubkey:n,isSigner:!1,isWritable:!1}),new Transaction().add({keys:c,programId:this.programId,data:a})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,i=rg.Deactivate,s=encodeData(i);return new Transaction().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}};StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111"),StakeProgram.space=200;let{publicKeyCreate:rf,ecdsaSign:ry}=E(),rm=_.struct([_.u8("numSignatures"),_.u16("signatureOffset"),_.u8("signatureInstructionIndex"),_.u16("ethAddressOffset"),_.u8("ethAddressInstructionIndex"),_.u16("messageDataOffset"),_.u16("messageDataSize"),_.u8("messageInstructionIndex"),_.blob(20,"ethAddress"),_.blob(64,"signature"),_.u8("recoveryId")]);let Secp256k1Program=class Secp256k1Program{constructor(){}static publicKeyToEthAddress(e){assert(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return p.lW.from(x().keccak_256.update(toBuffer(e)).digest()).slice(-20)}catch(e){throw Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:i,recoveryId:s,instructionIndex:n}=e;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(t),message:r,signature:i,recoveryId:s,instructionIndex:n})}static createInstructionWithEthAddress(e){let t;let{ethAddress:r,message:i,signature:s,recoveryId:n,instructionIndex:o=0}=e;assert(20===(t="string"==typeof r?r.startsWith("0x")?p.lW.from(r.substr(2),"hex"):p.lW.from(r,"hex"):r).length,`Address must be 20 bytes but received ${t.length} bytes`);let a=12+t.length,c=a+s.length+1,u=p.lW.alloc(rm.span+i.length);return rm.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:c,messageDataSize:i.length,messageInstructionIndex:o,signature:toBuffer(s),ethAddress:toBuffer(t),recoveryId:n},u),u.fill(toBuffer(i),rm.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:u})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:i}=e;assert(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{let e=toBuffer(t),s=rf(e,!1).slice(1),n=p.lW.from(x().keccak_256.update(toBuffer(r)).digest()),{signature:o,recid:a}=ry(n,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,recoveryId:a,instructionIndex:i})}catch(e){throw Error(`Error creating instruction; ${e}`)}}};Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");let rb=new PublicKey("Va1idator1nfo111111111111111111111111111111"),rk=(0,w.dt)({name:(0,w.Z_)(),website:(0,w.jt)((0,w.Z_)()),details:(0,w.jt)((0,w.Z_)()),keybaseUsername:(0,w.jt)((0,w.Z_)())});let ValidatorInfo=class ValidatorInfo{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e],r=decodeLength(t);if(2!==r)return null;let i=[];for(let e=0;e<2;e++){let e=new PublicKey(t.slice(0,32));t=t.slice(32);let r=1===t.slice(0,1)[0];t=t.slice(1),i.push({publicKey:e,isSigner:r})}if(i[0].publicKey.equals(rb)&&i[1].isSigner){let e=rustString().decode(p.lW.from(t)),r=JSON.parse(e);return(0,w.hu)(r,rk),new ValidatorInfo(i[1].publicKey,r)}return null}};let rS=new PublicKey("Vote111111111111111111111111111111111111111"),r_=_.struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),_.u8("commission"),_.nu64(),_.seq(_.struct([_.nu64("slot"),_.u32("confirmationCount")]),_.offset(_.u32(),-8),"votes"),_.u8("rootSlotValid"),_.nu64("rootSlot"),_.nu64(),_.seq(_.struct([_.nu64("epoch"),publicKey("authorizedVoter")]),_.offset(_.u32(),-8),"authorizedVoters"),_.struct([_.seq(_.struct([publicKey("authorizedPubkey"),_.nu64("epochOfLastAuthorizedSwitch"),_.nu64("targetEpoch")]),32,"buf"),_.nu64("idx"),_.u8("isEmpty")],"priorVoters"),_.nu64(),_.seq(_.struct([_.nu64("epoch"),_.nu64("credits"),_.nu64("prevCredits")]),_.offset(_.u32(),-8),"epochCredits"),_.struct([_.nu64("slot"),_.nu64("timestamp")],"lastTimestamp")]);let VoteAccount=class VoteAccount{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){let t=r_.decode(toBuffer(e),4),r=t.rootSlot;return t.rootSlotValid||(r=null),new VoteAccount({nodePubkey:new PublicKey(t.nodePubkey),authorizedWithdrawer:new PublicKey(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(parseAuthorizedVoter),priorVoters:function({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(parsePriorVoters),...e.slice(0,t).map(parsePriorVoters)]}(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}};function parseAuthorizedVoter({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new PublicKey(e)}}function parsePriorVoters({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new PublicKey(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}let VoteInit=class VoteInit{constructor(e,t,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=i}};let VoteInstruction=class VoteInstruction{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=_.u32("instruction"),i=r.decode(e.data);for(let[e,r]of Object.entries(rw))if(r.index==i){t=e;break}if(!t)throw Error("Instruction type incorrect; not a VoteInstruction");return t}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:t}=decodeData(rw.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new VoteInit(new PublicKey(t.nodePubkey),new PublicKey(t.authorizedVoter),new PublicKey(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,voteAuthorizationType:r}=decodeData(rw.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(t),voteAuthorizationType:{index:r}}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=decodeData(rw.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(VoteProgram.programId))throw Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}};let rw=Object.freeze({InitializeAccount:{index:0,layout:_.struct([_.u32("instruction"),((e="voteInit")=>_.struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),_.u8("commission")],e))()])},Authorize:{index:1,layout:_.struct([_.u32("instruction"),publicKey("newAuthorized"),_.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:_.struct([_.u32("instruction"),_.ns64("lamports")])}}),rA=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});let VoteProgram=class VoteProgram{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:i}=e,s=rw.InitializeAccount,n=encodeData(s,{voteInit:{nodePubkey:toBuffer(i.nodePubkey.toBuffer()),authorizedVoter:toBuffer(i.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e$,isSigner:!1,isWritable:!1},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new TransactionInstruction(o)}static createAccount(e){let t=new Transaction;return t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,n=rw.Authorize,o=encodeData(n,{newAuthorized:toBuffer(i.toBuffer()),voteAuthorizationType:s.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eM,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:a,programId:this.programId,data:o})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:s}=e,n=rw.Withdraw,o=encodeData(n,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Transaction().add({keys:a,programId:this.programId,data:o})}};async function sendAndConfirmRawTransaction(e,t,r){let i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},s=await e.sendRawTransaction(t,i),n=(await e.confirmTransaction(s,r&&r.commitment)).value;if(n.err)throw Error(`Raw transaction ${s} failed (${JSON.stringify(n)})`);return s}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111"),VoteProgram.space=3731;let rI={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function clusterApiUrl(e,t){let r=!1===t?"http":"https";if(!e)return rI[r].devnet;let i=rI[r][e];if(!i)throw Error(`Unknown ${r} cluster: ${e}`);return i}let rR=1e9}}]);